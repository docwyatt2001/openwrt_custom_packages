--- a/src/google/protobuf/stubs/atomicops_internals_mips_gcc.h
+++ b/src/google/protobuf/stubs/atomicops_internals_mips_gcc.h
@@ -150,7 +150,7 @@ inline void NoBarrier_Store(volatile Ato
 }
 
 inline void MemoryBarrierInternal() {
-  __asm__ __volatile__("sync" : : : "memory");
+  __asm__ __volatile__(".set mips2; sync; .set mips0" : : : "memory");
 }
 
 inline void Acquire_Store(volatile Atomic32* ptr, Atomic32 value) {
